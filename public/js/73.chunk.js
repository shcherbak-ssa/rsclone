(self.webpackChunkgitbook_clone=self.webpackChunkgitbook_clone||[]).push([[73],{97726:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Sr});var r=n(67294),a=n(5977),o=n(84751),c=n(9365),i=n(50039),l=n(57720),u=n(94184),s=n.n(u),f=n(59348),m=n(22530),d=n(87248);function p(e){var t,n,a,o=e.icon,c=e.text,i=e.isActive,l=e.clickHandler,u=s()("menu-item",(t={},a=i,(n=f._7.IS_ACTIVE)in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t));return r.createElement("div",{className:u,"data-class":"click",onClick:l},r.createElement(d.JO,{icon:o,className:"menu-item-icon",height:18}),r.createElement("div",{className:"menu-item-text"},c))}var v=n(73021),g=n(24623);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e){var t,n=e.size,a=void 0===n?v.eQ:n,o=e.avatarUrl,c=e.userFullname,i=e.clickHandler,l=s()("flex-center",{click:!!i});return r.createElement("div",{className:"avatar","data-class":l,style:(t={width:a,height:a},o?Object.assign({backgroundImage:"url(".concat(o,")")},t):t),onClick:function(){i&&i()}},function(){if(o)return"";var e,t,n=(e=c.split(g.Se),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],a=n[1],i=r[0],l=a?a[0]:"";return"".concat(i).concat(l).toUpperCase()}())}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){var t,n,a,o,c,i=e.menuItemsProps,l=e.avatarUrl,u=e.userFullname,d=e.activeMenuItem,v=(o=(0,r.useState)(!1),c=2,function(e){if(Array.isArray(e))return e}(o)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(o,c)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(o,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=v[0],b=v[1],h=s()("menu",(t={},n=f._7.IS_OPEN,a=g,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t)),S={avatarUrl:l,userFullname:u};function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.o;e.removeOverflowHidden().removeClass(f._7.SHOW_SIDEBAR)}return(0,r.useEffect)((function(){b(!1),A()}),[d]),r.createElement("div",{className:h,onClick:function(e){e.stopPropagation(),e.target.classList.contains("menu")&&(b(!1),A())}},r.createElement("div",{className:"menu-container","data-class":"flex-column"},r.createElement("div",{className:"menu-user"},r.createElement(E,Object.assign({},S)),r.createElement("div",{className:"menu-username"},u)),r.createElement(p,Object.assign({},i.spaces)),r.createElement(p,Object.assign({},i.settings)),r.createElement("div",{className:"menu-line"}),r.createElement(p,Object.assign({},i.logout)),r.createElement("div",{className:"menu-button","data-class":"flex-center click",onClick:function(e){e.stopPropagation(),b(!g);var t=new m.o;g?A(t):t.setOveflowHidden().addClass(f._7.SHOW_SIDEBAR)}},r.createElement("span",null),r.createElement("span",null),r.createElement("span",null))))}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=new Map,P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"subscribePopup",value:function(e,t,n){A.set(e,[t,n])}},{key:"unsubscribePopup",value:function(e){A.delete(e)}},{key:"openPopup",value:function(e){A.get(e)[0]()}},{key:"closePopup",value:function(e){A.get(e)[1]()}}])&&S(t.prototype,n),e}(),O=n(93042),w=n(78100);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e){var t,n,a=e.popupName,o=e.confirmButtonProps,c=e.closeHandler,i=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],u=i[1],s=function(e){return(0,w.U)(O.wd.APP).popups[e]}(a),f={title:s.title,confirmButtonProps:Object.assign({value:s.confirmButtonValue},o),closePopup:function(){u(!1),c&&c()}};function m(){u(!0)}return(0,r.useEffect)((function(){var e=new P;return e.subscribePopup(a,m,(function(){return u(!1)})),function(){e.unsubscribePopup(a)}}),[]),l?[f,s]:null}var C=n(73935),k=n(89629);function I(e){var t=e.title,n=e.confirmButtonProps,a=e.closePopup,o=e.children,c=document.getElementById(f.Pz.POPUP),i=(0,w.U)(O.wd.ASSETS),l={type:f.qh.SECONDARY,value:i.popupCloseButtonValue,clickHandler:a},u=r.createElement("div",{className:"popup",onClick:function(e){e.stopPropagation(),e.target.classList.contains("popup")&&a()}},r.createElement("div",{className:"popup-container"},r.createElement("div",{className:"popup-header"},t),r.createElement("div",{className:"popup-scroll"},r.createElement("div",{className:"popup-body"},o),r.createElement("div",{className:"popup-footer"},r.createElement(k.XY.Button,Object.assign({},l)),r.createElement(k.XY.Button,Object.assign({},n))))));return(0,r.useEffect)((function(){var e=new m.o;return e.setOveflowHidden(),function(){e.removeOverflowHidden()}}),[]),C.createPortal(u,c)}function L(e){var t=e.children;return r.createElement("div",{className:"popup-message"},t)}var N=n(77858);function R(){var e=T({popupName:f.rW.LOGOUT,confirmButtonProps:{clickHandler:function(){(new N.P).logoutUser()}}});if(null===e)return r.createElement("div",null);var t=e[0],n=e[1].message;return r.createElement(I,Object.assign({},t),r.createElement(L,null,n))}function _(){return(0,w.U)(O.wd.APP)}var D=n(12165),U=n(37290);function x(e){var t=U.B.get(v.cR.USER_STORE);return(0,o.v9)(t.getState(e))}function H(){return{userAvatar:x(v.s1.AVATAR),userFullname:x(v.s1.FULLNAME)}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(){var e,t,n=(0,a.k6)(),o=_(),u=(e=(0,r.useState)(""),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=u[0],m=u[1],d=new D.f,p=H(),v=p.userAvatar,g=p.userFullname,b={menuItemsProps:{spaces:{icon:c.Z,text:o.menu.items[f.G_.SPACES],isActive:s===f.G_.SPACES,clickHandler:function(){E(f.G_.SPACES,d.getSpacesRoutePath())}},settings:{icon:i.Z,text:o.menu.items[f.G_.SETTINGS],isActive:s===f.G_.SETTINGS,clickHandler:function(){E(f.G_.SETTINGS,d.getSettingsRoutePath())}},logout:{icon:l.Z,text:o.menu.items[f.G_.LOGOUT],clickHandler:function(){(new P).openPopup(f.rW.LOGOUT)}}},avatarUrl:v,activeMenuItem:s,userFullname:g};function E(e,t){e!==s&&(m(e),n.push(t))}return(0,r.useEffect)((function(){location.pathname===d.getSettingsRoutePath()?m(f.G_.SETTINGS):m(f.G_.SPACES)}),[]),r.createElement(r.Fragment,null,r.createElement(h,Object.assign({},b)),r.createElement(R,null))}function K(e){var t,n,a,o=e.isSpacePageOpen,c=e.children,i=s()("app",(t={},a=o,(n=f._7.IS_SPACE_PAGE_OPEN)in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t));return r.createElement("div",{className:i},r.createElement("div",{className:"app-header"}),r.createElement("div",{className:"app-homepage"},r.createElement("div",{className:"app-menu"}),c))}var V=n(82780),B=n(61581),F=n(82023),W=n(12907);function Z(e){var t,n,a,o=e.children,c=(0,F.Z)({icons:B.D,iconPayloads:(t={},n=f.jl.INFO,a={dropdownComponent:W.R},n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t)});return r.createElement("div",{className:"sidebar","data-class":"flex-column"},r.createElement("div",{className:"sidebar-space","data-class":"flex-column"},o),r.createElement("div",{className:"sidebar-icons","data-class":"flex-column"},r.createElement("div",{className:"sidebar-line"}),c.map((function(e,t){return r.createElement(V.m,Object.assign({key:t},e))}))))}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"loadTheme",value:function(t){var n=new e,r=n.getThemeFilePathname(t);n.findThemeLinkElement().setAttribute("href",r)}}],(n=[{key:"getThemeFilePathname",value:function(e){return"/css/".concat(e,".css")}},{key:"findThemeLinkElement",value:function(){return document.getElementById(f.Pz.THEME)}}])&&$(t.prototype,n),r&&$(t,r),e}(),q=n(95172),J=n(35306);function X(e){var t=e.title,n=e.buttonProps,a=e.children;return r.createElement("div",{className:"homepage-section"},r.createElement("div",{className:"homepage-section-header"},r.createElement("div",{className:"homepage-section-title"},t),n?r.createElement(k.XY.Button,Object.assign({},n)):""),r.createElement("div",{className:"homepage-section-content"},a))}function z(e){var t=e.sectionLabel,n=e.buttonClickHandler,a=e.children,o=_(),c=Object.assign({title:o.homepage[t].title},n?{buttonProps:{icon:J.Z,value:o.homepage[t].buttonValue,clickHandler:n}}:{});return r.createElement(X,Object.assign({},c),a)}function Q(e){var t=e.children;return r.createElement("div",{className:"spaces"},t)}var ee=n(27537),te=n.n(ee),ne=n(38366);function re(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ce=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pressedKeyboardKeys=[],this.keydownHandler=this.handleKeydownEvent.bind(this),this.keyupHandler=this.handleKeyupEvent.bind(this),this.setPressedKeyboardKeys=t}var t,n,r;return t=e,r=[{key:"transformShortcutKeys",value:function(e){return e.split(g.fB).map(ne.l).join(g.uI)}},{key:"getSectionShortcuts",value:function(e,t){return t.filter((function(t){return t.section===e}))}},{key:"filterUpdated",value:function(e,t){return e.filter((function(e,n){return e.keys!==t[n].keys}))}}],(n=[{key:"initEvents",value:function(){document.addEventListener("keydown",this.keydownHandler),document.addEventListener("keyup",this.keyupHandler)}},{key:"removeEvents",value:function(){document.removeEventListener("keydown",this.keydownHandler),document.removeEventListener("keyup",this.keyupHandler)}},{key:"handleKeydownEvent",value:function(e){var t=te()(e);this.pressedKeyboardKeys.push(t)}},{key:"handleKeyupEvent",value:function(){this.removeDuplicatesFromPressedKeyboardKeys(),this.setPressedKeyboardKeys(re(this.pressedKeyboardKeys).join(g.fB)),this.cleanPressesKeyboardKeys()}},{key:"removeDuplicatesFromPressedKeyboardKeys",value:function(){this.pressedKeyboardKeys=re(new Set(this.pressedKeyboardKeys))}},{key:"cleanPressesKeyboardKeys",value:function(){this.pressedKeyboardKeys=[]}}])&&oe(t.prototype,n),r&&oe(t,r),e}();function ie(e){var t=e.spacesLanguage,n=e.addSpaceShortcutKeys,a=t.buttonValue,o=t.message;function c(e){return r.createElement("span",{className:"spaces-message-label"},e)}return r.createElement("div",{className:"spaces-message"},o[0],c(a),o[1],c(ce.transformShortcutKeys(n)),o[2])}var le=n(22669),ue=n(30831),se=n(68375),fe=n(88307),me=n(61586),de=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function c(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}l((r=r.apply(e,t||[])).next())}))},pe=new me.v;pe.on(le.do.CREATE_SPACE,(function(e){return de(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,a,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[v.s1.SPACE_NAME,v.s1.SPACE_COLOR,v.s1.SPACE_LOGO],r=new se.Q,a=r.getDraftValues(n),o=new ue.L,t.next=6,o.createSpace(a);case 6:null===(c=t.sent)?e(!1):e(!0,c);case 8:case"end":return t.stop()}}),t)})))})).on(le.do.UPDATE_SPACE,(function(e){var t=e.updatedData,n=e.callback;return de(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,a,o,c,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new se.Q,a=r.getDraftState(v.s1.SPACE_ID),o={id:a,updates:Object.assign({},t)},c=new ue.L,e.next=6,c.updateSpace(o);case 6:(i=e.sent)&&(new fe.T).updateStates(t),n(i);case 9:case"end":return e.stop()}}),e)})))})).on(le.do.DELETE_SPACE,(function(e){return de(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new se.Q,r=n.getDraftState(v.s1.SPACE_ID),a=new ue.L,t.next=5,a.deleteSpace(r);case 5:o=t.sent,e(o);case 7:case"end":return t.stop()}}),t)})))}));var ve=n(55421);function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(e,t)||be(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){if(e){if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e){var t=e.controlDataLabels,n=e.updatedData,a=ge((0,r.useState)(!1),2),c=a[0],i=a[1],l=U.B.get(v.cR.USER_STORE),u=(0,o.v9)(l.getStoreStates(t)),s=U.B.get(v.cR.USER_DRAFT_STORE),f=(0,o.v9)(s.getStoreStates(t));function m(e,t,r){e?n.add(t,r):n.remove(t)}return(0,r.useEffect)((function(){return ve.z.emit(le.sR.SYNC_DRAFT),function(){ve.z.emit(le.sR.SYNC_DRAFT)}}),[]),(0,r.useEffect)((function(){var e,t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=be(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}(u.entries());try{for(t.s();!(e=t.n()).done;){var r=ge(e.value,2),a=r[0],o=r[1],c=f.get(a);if(a===v.s1.SHORTCUTS){var l=ce.filterUpdated(c,o);m(l.length!==v.mN,a,l)}else m(o!==c,a,c)}}catch(e){t.e(e)}finally{t.f()}i(n.isUpdatesExist())})),c}function he(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.updatedData=new Map}var t,n;return t=e,(n=[{key:"isUpdatesExist",value:function(){return this.updatedData.size!==v.mN}},{key:"add",value:function(e,t){this.updatedData.set(e,t)}},{key:"remove",value:function(e){this.updatedData.delete(e)}},{key:"get",value:function(e){if(e)return this.updatedData.get(e);var t,n,r,a={},o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=he(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}(this.updatedData.entries());try{for(o.s();!(t=o.n()).done;){var c=(n=t.value,r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(n,r)||he(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=c[0],l=c[1];a[i]=l}}catch(e){o.e(e)}finally{o.f()}return a}},{key:"has",value:function(e){return this.updatedData.has(e)}},{key:"delete",value:function(e){this.updatedData.delete(e)}}])&&Ae(t.prototype,n),e}(),Oe=n(83982);function we(e){var t=e.title,n=e.children;return r.createElement("div",{className:"settings-group"},r.createElement("div",{className:"settings-group-title"},t.toUpperCase()),n)}function je(e){var t=e.sectionLabel,n=e.groupLabel;return{title:_().settings[t].groups[n].title}}function Te(e){var t=e.children;return r.createElement("div",{className:"space-settings-data"},t)}var Ce=n(11718);function ke(e){var t=e.children;return r.createElement("div",{className:"space-color-container"},t)}var Ie=n(29670);function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ne=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createHexBackgroundColorStyle",value:function(e){return{backgroundColor:"#".concat(e)}}},{key:"createHexColorStyle",value:function(e){return{color:"#".concat(e)}}},{key:"createHexPageLinkHoverStyles",value:function(e){return{borderColor:"#".concat(e),color:"#".concat(e)}}}],(n=[{key:"getImageUrl",value:function(e){return"/assets/".concat(e,".png")}},{key:"isValidUserAvatarFileType",value:function(e){var t=this.getFileType(e);return Oe.X.includes(t)}},{key:"getFileType",value:function(e){return e.split(g.Ve).reverse()[0]}}])&&Le(t.prototype,n),r&&Le(t,r),e}();function Re(e){var t,n,a,o=e.activeColor,c=e.color,i=e.setActiveColor,l=s()("space-color",(t={},n=f._7.IS_ACTIVE,a=o===c,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t)),u={className:"space-color-icon",icon:Ie.Z,height:f.TN};return r.createElement("div",{className:l,"data-class":"flex-center click",style:Ne.createHexBackgroundColorStyle(c),onClick:function(){i(c)}},r.createElement(d.JO,Object.assign({},u)))}var _e=n(68814),De=n(96652);function Ue(e){var t=e.logoType,n=void 0===t?f.mL.SPACE:t,a=e.color,o=e.logo,c=s()("space-logo",n);return r.createElement("div",{className:c,"data-class":"flex-center",style:Ne.createHexBackgroundColorStyle(a)},o)}function xe(e){var t=e.activeColor,n=e.currentLogo,a=e.clickHandler,o={logoType:f.mL.SETTINGS,color:t,logo:n};return r.createElement("div",{className:"space-settings-logo","data-class":"click",onClick:function(){a()}},r.createElement(Ue,Object.assign({},o)))}function He(e){var t=e.emoji,n=e.clickHandler;return r.createElement("div",{className:"dropdown-item-space-logo","data-class":"click",onClick:function(){n(t)}},t)}var Ge=n(41089),Me=n(19001);function Ke(e){return function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){if(e){if("string"==typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(e,t):void 0}}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fe(e){var t,n,a=e.selectSpaceLogo,o=(t=(0,r.useState)([]),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(t,n)||Ve(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=o[0],i=o[1];function l(){var e=(new Me.G).getElements(Ge.Mz,c.length,50);i([].concat(Ke(c),Ke(e)))}return(0,r.useEffect)((function(){var e;return c.length<=Ge.Mz.length&&(e=setTimeout(l,100)),function(){e&&clearTimeout(e)}}),[c]),r.createElement("div",{className:"dropdown dropdown-space-logo","data-class":"shadow"},r.createElement("div",{className:"dropdown-arrow"}),r.createElement("div",{className:"dropdown-space-logo-items"},c.map((function(e,t){var n={emoji:e,clickHandler:function(e){a(e)}};return r.createElement(He,Object.assign({key:t},n))}))))}var We=n(77993);function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $e(){var e,t,n=(0,_e.K)(v.s1.SPACE_COLOR),a=(0,_e.K)(v.s1.SPACE_LOGO),o=(e=(0,r.useState)(!1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=o[0],i=o[1],l={sectionLabel:v.Kh.SPACE,groupLabel:v.V1.SPACE_COLOR},u={dataLabel:v.s1.SPACE_NAME},s={activeColor:n,currentLogo:a,clickHandler:function(){i(!c)}},f={selectSpaceLogo:function(e){i(!1),(new We.s).updateSpaceLogo(e)}},m=(0,Ce.H)(u),d=je(l);function p(e){var t={value:e,dataLabel:v.s1.SPACE_COLOR};De.D.emit(le.f$.UPDATE_VALUE,t)}return r.createElement(r.Fragment,null,r.createElement(Te,null,r.createElement(xe,Object.assign({},s)),r.createElement(k.XY.Input,Object.assign({},m))),c?r.createElement(Fe,Object.assign({},f)):"",r.createElement(we,Object.assign({},d),r.createElement(ke,null,Oe.m.map((function(e,t){var a={color:e,activeColor:n,setActiveColor:p};return r.createElement(Re,Object.assign({key:t},a))})))))}function Ye(){return function(e,t){!function(e,t){var n={space:e,callback:t};ve.z.emit(le.sR.SET_ACTIVE_SPACE,n)}(e,(function(){!function(e,t){var n={space:e,callback:t};De.D.emit(le.f$.SET_ACTIVE_SPACE,n)}(e,(function(){t()}))}))}}function qe(){var e=(0,a.k6)();return function(t){var n=(new D.f).getSpacePageRoutePath(t.pathname);e.push(n)}}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xe(e){var t,n,a=e.popupName,o=e.spaceEvent,c=Ye(),i=qe(),l=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Je(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],s=l[1],m=[v.s1.SPACE_NAME];a===f.rW.UPDATE_SPACE&&m.push(v.s1.SPACE_LOGO,v.s1.SPACE_COLOR);var d=new Pe,p=ye({controlDataLabels:m,updatedData:d}),g=T({popupName:a,confirmButtonProps:{isLoading:u,isDisable:!p,clickHandler:function(){if(s(!0),a===f.rW.UPDATE_SPACE){var e={updatedData:d.get(),callback:b};pe.emit(o,e)}else pe.emit(o,b)}},closeHandler:function(){s(!1)}});function b(e,t){s(!1),e&&((new P).closePopup(a),a===f.rW.CREATE_SPACE&&c(t,(function(){i(t)})))}if(null===g)return r.createElement("div",null);var E=g[0];return r.createElement(I,Object.assign({},E),r.createElement($e,null))}var ze=n(8602),Qe=n(74468),et=n(80746),tt=n(93582),nt=n(57824),rt=n.n(nt);function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ot=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getLastUpdated",value:function(t,n){var r=new e;return"".concat(n," ").concat(r.getLastUpdated(t))}}],(n=[{key:"getLastUpdated",value:function(e){var t=+new Date;return rt()(t-e)}}])&&at(t.prototype,n),r&&at(t,r),e}();function ct(e){var t,n,a,o=e.space,c=e.dropdownProps,i=e.iconClickHandler,l=e.clickHandler,u=_(),m={color:o.color,logo:o.logo},p=s()("space-icon",(t={},a=null!==c,(n=f._7.IS_ACTIVE)in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t)),v={icon:et.Z,height:14,className:"space-date-icon"};return r.createElement("div",{className:"space","data-class":"click shadow",onClick:function(){l()}},r.createElement("div",{className:"space-header"},r.createElement(Ue,Object.assign({},m)),r.createElement("div",{className:"space-title"},o.name)),r.createElement("div",{className:"space-line"}),r.createElement("div",{className:"space-footer"},r.createElement("div",{className:"space-date"},r.createElement(d.JO,Object.assign({},v)),ot.getLastUpdated(o.lastUpdated,u.homepage.spaces.lastUpdated.label)),r.createElement("div",{className:p,"data-class":"click flex-center",onClick:function(e){e.stopPropagation(),i()}},r.createElement(d.JO,{icon:Qe.Z,height:f.TN}),null===c?"":r.createElement(tt.J,Object.assign({},c)))))}var it=n(82245);function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ut(e){var t,n,a=e.space,o=_(),c=Ye(),l=qe(),u=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=u[0],m=u[1],d={items:[{icon:i.Z,text:o.dropdowns[v.Jt.SETTINGS_SPACE],label:v.Jt.SETTINGS_SPACE},{icon:ze.Z,text:o.dropdowns[v.Jt.DELETE_SPACE],label:v.Jt.DELETE_SPACE}],itemClickHandler:function(e){switch(e){case v.Jt.SETTINGS_SPACE:g(f.rW.UPDATE_SPACE);break;case v.Jt.DELETE_SPACE:g(f.rW.DELETE_SPACE);break;default:m(!1)}},dropdownName:f.gd.SPACE},p={space:a,dropdownProps:s?d:null,iconClickHandler:function(){it.V.closeDropdowns(),m(!s)},clickHandler:function(){c(a,(function(){l(a)}))}};function g(e){c(a,(function(){(new P).openPopup(e)}))}return r.createElement(ct,Object.assign({},p))}var st=n(5192),ft=n(22222);function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e,t){return!t||"object"!==mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Et=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function c(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}l((r=r.apply(e,t||[])).next())}))},yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(c,e);var t,n,r,a,o=(r=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bt(r);if(a){var n=bt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return gt(this,e)});function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),e=o.call(this);var t=new st.C;return e.activeSpaceStore=t.getStore(v.cR.ACTIVE_SPACE_STORE),e.spacesStore=t.getStore(v.cR.SPACES_STORE),e}return t=c,(n=[{key:"openSpace",value:function(e,t){return Et(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,a,o,c,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,this.activeSpaceStore.setIsOpen(!0),r=this.createSpacePagesRequest(e),n.next=5,this.requestSender.send(r).get();case 5:a=n.sent,o=a.parseResponse(),c=o.pages,i=t?c.find((function(e){return e.pathname===t})).id:g.v6,this.activeSpaceStore.openSpace(c,i),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0);case 14:case"end":return n.stop()}}),n,this,[[0,11]])})))}},{key:"closeSpace",value:function(){this.activeSpaceStore.closeSpace()}},{key:"setActiveSpaceID",value:function(e){this.activeSpaceStore.setActivePageID(e)}},{key:"createPage",value:function(e,t){return Et(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=this.createRequestWithBody(t,{newPageTitle:e}),n.next=4,this.requestSender.send(r).create();case 4:return a=n.sent,o=a.parseResponse(),this.activeSpaceStore.addPage(o),this.updateSpacePageIDs(t,(function(e){return[].concat(function(e){if(Array.isArray(e))return dt(e)}(t=e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[o.id]);var t})),n.abrupt("return",o.id);case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0);case 14:case"end":return n.stop()}}),n,this,[[0,11]])})))}},{key:"updatePage",value:function(e,t){return Et(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=this.createRequestWithBody(t,e),n.next=4,this.requestSender.send(r).update();case 4:a=n.sent,e=a.parseResponse(),o=this.updateSpacePages((function(t){return t.map((function(t){return t.id===e.id?Object.assign(Object.assign({},t),e.updates):t}))})),this.activeSpaceStore.updatePages(o),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,this,[[0,10]])})))}},{key:"deletePage",value:function(e,t){return Et(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=this.createRequestWithBody(t,{deletePageID:e}),n.next=4,this.requestSender.send(r).delete();case 4:return n.sent.parseResponse(),a=this.updateSpacePages((function(t){return t.filter((function(t){return t.id!==e}))})),this.activeSpaceStore.deletePage(a),this.updateSpacePageIDs(t,(function(t){return t.filter((function(t){return t!==e}))})),n.abrupt("return",!0);case 12:return n.prev=12,n.t0=n.catch(0),console.log(n.t0),n.abrupt("return",!1);case 16:case"end":return n.stop()}}),n,this,[[0,12]])})))}},{key:"createSpacePagesRequest",value:function(e){var t=this.urlPathname.getPagesPathname(e);return this.requestCreator.appendUrlPathname(t).createRequest()}},{key:"createRequestWithBody",value:function(e,t){var n=this.urlPathname.getPagesPathname(e);return this.requestCreator.appendUrlPathname(n).setBody(t).createRequest()}},{key:"updateSpacePageIDs",value:function(e,t){var n=this.spacesStore.getSpaces().map((function(n){return n.pathname===e&&(n.pages=t(n.pages)),n}));this.spacesStore.updateSpaces(n)}},{key:"updateSpacePages",value:function(e){return e(this.activeSpaceStore.getPages())}}])&&pt(t.prototype,n),c}(ft.g);function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var At=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function c(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}l((r=r.apply(e,t||[])).next())}))},Pt=new me.v;function Ot(){return{spacePathname:(new Me.G).getOpenSpacePathnames().spacePathname,activeSpaceModel:new yt}}function wt(e){var t=new fe.T,n=t.getState(v.s1.SPACE_PAGES),r=ht({},v.s1.SPACE_PAGES,e(n));t.updateStates(r)}function jt(e){var t=new ue.L,n={id:t.getSpaceIDByPathname(e),updates:ht({},v.s1.SPACE_LAST_UPDATED,+new Date)};t.updateStoreSpaces(n)}function Tt(){var e=(0,a.k6)();return function(){Pt.emit(le.uC.CLOSE_SPACE);var t=(new D.f).getRootRoutePath();e.push(t),(new We.s).resetSpaceStates()}}function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function It(e){var t=e.popupName,n=e.controller,a=e.controllerEvent,o=e.controllerPayload,c=_(),i=Tt(),l=Ct((0,r.useState)(!1),2),u=l[0],s=l[1],m=Ct((0,r.useState)(!1),2),d=m[0],p=m[1],v=Ct((0,r.useState)(g.v6),2),b=v[0],E=v[1],y=T({popupName:t,confirmButtonProps:{isLoading:u,isDisable:!d,type:f.qh.DANGER,clickHandler:function(){s(!0),o?n.emit(a,Object.assign(Object.assign({},o),{callback:S})):n.emit(a,S)}},closeHandler:function(){h()}});function h(){s(!1),p(!1),E(g.v6)}function S(e){h(),e&&((new P).closePopup(t),t===f.rW.DELETE_SPACE&&i())}if(null===y)return r.createElement("div",null);var A=y[0],O=y[1],w=c.deletePopupConfirmation,j={value:b,error:g.v6,placeholder:w.placeholder,description:w.description,updateValue:function(e){E(e),p(e===w.confirmWord)}};return r.createElement(I,Object.assign({},A),r.createElement(L,null,O.message),r.createElement(k.XY.Input,Object.assign({},j)))}function Lt(){var e=_().homepage.spaces,t=U.B.get(v.cR.SPACES_STORE),n=(0,o.v9)(t.getSpaces()),a=U.B.get(v.cR.USER_STORE),c=(0,o.v9)(a.getShortcutKeys(O.L1.ADD_SPACE));(0,q.y)(c,m);var i={sectionLabel:v.WZ.SPACES,buttonClickHandler:function(){m()}},l={popupName:f.rW.CREATE_SPACE,spaceEvent:le.do.CREATE_SPACE},u={popupName:f.rW.UPDATE_SPACE,spaceEvent:le.do.UPDATE_SPACE},s={popupName:f.rW.DELETE_SPACE,controller:pe,controllerEvent:le.do.DELETE_SPACE};function m(){(new We.s).resetSpaceStates(),(new P).openPopup(f.rW.CREATE_SPACE)}return r.createElement(z,Object.assign({},i),function(){if(n.length===v.mN){var t={spacesLanguage:e,addSpaceShortcutKeys:c};return r.createElement(ie,Object.assign({},t))}var a=n.map((function(e){var t={space:e};return r.createElement(ut,Object.assign({key:e.id},t))}));return r.createElement(Q,null,a)}(),r.createElement(Xe,Object.assign({},l)),r.createElement(Xe,Object.assign({},u)),r.createElement(It,Object.assign({},s)))}function Nt(e){var t=e.title;return r.createElement("div",{className:"settings-section-title"},t)}function Rt(e){var t=e.sectionLabel,n=e.setActiveSettingsSection,a=_();return r.createElement("div",{className:"settings-section settings-section-close","data-class":"click shadow",onClick:function(){n(t)}},r.createElement(Nt,{title:a.settings[t].title}))}Pt.on(le.uC.OPEN_SPACE,(function(e){var t=e.spacePathname,n=e.pagePathname;return At(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new yt,e.next=3,r.openSpace(t,n);case 3:case"end":return e.stop()}}),e)})))})).on(le.uC.CLOSE_SPACE,(function(){(new yt).closeSpace()})).on(le.uC.SET_ACTIVE_PAGE,(function(e){var t=e.pageID,n=e.callback;(new yt).setActiveSpaceID(t),n()})).on(le.uC.ADD_PAGE,(function(e){var t=e.newPageTitle,n=e.callback;return At(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,a,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wt((function(e){return[].concat(function(e){if(Array.isArray(e))return St(e)}(t=e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return St(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[v.uP]);var t})),r=Ot(),a=r.activeSpaceModel,o=r.spacePathname,e.next=4,a.createPage(t,o);case 4:c=e.sent,wt((function(e){return e.map((function(e){return e===v.uP?c:e}))})),jt(o),n(c);case 8:case"end":return e.stop()}}),e)})))})).on(le.uC.UPDATE_PAGE,(function(e){return At(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Ot(),r=n.activeSpaceModel,a=n.spacePathname,t.next=3,r.updatePage(e,a);case 3:jt(a);case 4:case"end":return t.stop()}}),t)})))})).on(le.uC.DELETE_PAGE,(function(e){var t=e.pageID,n=e.activePage,r=e.callback,a=e.changePagePathname;return At(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o,c,i,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Ot(),c=o.activeSpaceModel,i=o.spacePathname,e.next=3,c.deletePage(t,i);case 3:(l=e.sent)&&(wt((function(e){if(n.id===t){var r=e[0],o={pageID:r,callback:function(){a(r)}};Pt.emit(le.uC.SET_ACTIVE_PAGE,o)}return e.filter((function(e){return e!==t}))})),jt(i)),r(l);case 6:case"end":return e.stop()}}),e)})))}));var _t=[v.Kh.USER,v.Kh.LOGIN,v.Kh.APP,v.Kh.SHORTCUTS,v.Kh.DANGER],Dt=n(79470);function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xt(e){var t,n,a=e.initialItemLabel,o=e.dataLabel,c=e.items,i=new Me.G,l=(t=(0,r.useState)(a),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ut(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],s=l[1],f=(0,w.U)(O.wd.USER_DRAFT),m=(0,Dt._)(o);return Object.assign(Object.assign({},function(){if(o===v.s1.THEME)return{items:c.map((function(e){var t=e.label,n=e.image;return{description:f[o][t],label:t,image:n}}))};var e=c.map((function(e){var t=e.label;return{value:f[o].items[t],label:t}})),t=i.getSelectedItem(e,u);return{items:e,placeholder:f[o].placeholder,selectedItemValue:t.value}}()),{selectedItemLabel:u,updateSelectedItem:function(e){if(e!==u){var t=i.getSelectedItem(c,e).label;m(t),s(t)}}})}function Ht(e){var t,n=e.label,a=e.image,o=e.description,c={label:n,isSelected:n===e.selectedItemLabel,description:o,clickHanlder:e.selectThemeItem};return r.createElement("div",{className:"select-theme-item"},r.createElement("div",{className:"select-theme-view",style:(t=new Ne,{backgroundImage:"url(".concat(t.getImageUrl(a),")")})}),r.createElement(k.XY.Radio,Object.assign({},c)))}function Gt(e){var t=e.selectedItemLabel,n=e.items,a=e.updateSelectedItem;function o(e){a(e)}return r.createElement("div",{className:"select-theme"},n.map((function(e,n){var a=Object.assign(Object.assign({},e),{selectedItemLabel:t,selectThemeItem:o});return r.createElement(Ht,Object.assign({key:n},a))})))}var Mt=n(73960),Kt=[{label:O.b3.ORIGINAL,image:"original-theme",description:O.b3.ORIGINAL},{label:O.b3.LIGHT,image:"light-theme",description:O.b3.LIGHT},{label:O.b3.DARK,image:"dark-theme",description:O.b3.DARK}],Vt=n(31158),Bt=n(83335),Ft=new me.v;function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zt(e){var t,n,a=e.sectionLabel,o=e.controlDataLabels,c=e.savingFinishHandler,i=e.saveUpdatedData,l=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],s=l[1],f=_(),m=new Pe,d=ye({controlDataLabels:o,updatedData:m});function p(){if(!m.isUpdatesExist())return g(!0);if(i)return i(m.get(),g);var e={updatedData:m.get(),callback:g};ve.z.emit(le.sR.UPDATE_USER,e)}function g(e){s(!1),c&&c(e)}return Object.assign({title:f.settings[a].title,isSavingActive:u},d?{saveButtonProps:{isLoading:u,icon:Vt.Z,value:f.homepage.settings.saveButtonValue,clickHandler:function(){if(s(!0),m.has(v.s1.AVATAR)){var e=m.get(v.s1.AVATAR);m.delete(v.s1.AVATAR);var t={avatarFile:e,callback:p};Ft.emit(le.Tz.CHANGE_AVATAR,t)}else p()}}}:{})}function $t(e){var t,n,a,o=e.title,c=e.isSavingActive,i=void 0!==c&&c,l=e.saveButtonProps,u=e.children,m=s()("settings-section",(t={},a=i,(n=f._7.IS_DISABLE)in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t));return r.createElement("div",{className:m},r.createElement("div",{className:"settings-section-header"},r.createElement(Nt,{title:o}),l?r.createElement(k.XY.Button,Object.assign({},l)):""),r.createElement("div",{className:"settings-section-content"},u))}function Yt(){var e=x(v.s1.LANGUAGE),t=x(v.s1.THEME),n={sectionLabel:v.Kh.APP,controlDataLabels:[v.s1.LANGUAGE,v.s1.THEME]},a={sectionLabel:v.Kh.APP,groupLabel:v.V1.THEME},o={initialItemLabel:e,items:Mt.F,dataLabel:v.s1.LANGUAGE},c={initialItemLabel:t,items:Kt,dataLabel:v.s1.THEME},i=Zt(n),l=je(a),u=xt(o),s=xt(c);return r.createElement($t,Object.assign({},i),r.createElement(k.XY.Select,Object.assign({},u)),r.createElement(we,Object.assign({},l),r.createElement(Gt,Object.assign({},s))))}function qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jt(e){var t=e.title,n=e.description,a=e.buttonProps,o=e.selectAction,c=r.createElement(r.Fragment,null,r.createElement("div",{className:"settings-action-content"},r.createElement("div",{className:"settings-action-title"},t),r.createElement("div",{className:"settings-action-description"},n)),r.createElement(k.XY.Button,Object.assign({},a)));if(o){var i,l=o.isSelected,u=o.toggleSelection,m=s()("settings-action",(qt(i={},f._7.SELECT_TYPE,!0),qt(i,f._7.IS_SELECTED,l),i));return r.createElement("div",{className:m,"data-class":"click",onClick:function(){u()}},c)}return r.createElement("div",{className:"settings-action"},c)}function Xt(e){var t=e.sectionLabel,n=e.actionLabel,r=e.buttonProps,a=e.selectAction,o=_().settings[t].actions[n];return{title:o.title,description:o.description,buttonProps:Object.assign({value:o.buttonValue},r),selectAction:a}}function zt(){var e={title:_().settings[v.Kh.DANGER].title},t={sectionLabel:v.Kh.DANGER,actionLabel:v.Y1.DELETE_ACCOUNT,buttonProps:{type:f.qh.DANGER,clickHandler:function(){(new P).openPopup(f.rW.DELETE_ACCOUNT)}}},n={popupName:f.rW.DELETE_ACCOUNT,controller:ve.z,controllerEvent:le.sR.DELETE_USER},a=Xt(t);return r.createElement($t,Object.assign({},e),r.createElement(Jt,Object.assign({},a)),r.createElement(It,Object.assign({},n)))}Ft.on(le.Tz.CHANGE_AVATAR,(function(e){var t,n,r,a,o=e.avatarFile,c=e.callback;return t=this,n=void 0,r=void 0,a=regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new Bt.B,n=new st.C,r=n.getStore(v.cR.USER_STORE),(a=r.getState(v.s1.AVATAR))!==g.v6){e.next=9;break}return e.next=7,t.createAvatar(o);case 7:e.next=17;break;case 9:if(o!==g.v6){e.next=14;break}return e.next=12,t.deleteAvatar();case 12:e.next=16;break;case 14:return e.next=16,t.updateAvatar(o);case 16:URL.revokeObjectURL(a);case 17:c();case 18:case"end":return e.stop()}}),e)})),new(r||(r=Promise))((function(e,o){function c(e){try{l(a.next(e))}catch(e){o(e)}}function i(e){try{l(a.throw(e))}catch(e){o(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(c,i)}l((a=a.apply(t,n||[])).next())}))}));var Qt=n(83709);function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tn(){var e,t,n=(e=(0,r.useState)(!1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?en(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=n[0],o=n[1],c={dataLabel:v.s1.EMAIL},i={descriptionLabel:f.vH.CURRENT_PASSWORD},l={dataLabel:v.s1.NEW_PASSWORD,descriptionLabel:f.vH.NEW_PASSWORD},u={sectionLabel:v.Kh.LOGIN,controlDataLabels:[v.s1.EMAIL,v.s1.PASSWORD,v.s1.NEW_PASSWORD],savingFinishHandler:function(e){e&&a&&o(!1)}},s={sectionLabel:v.Kh.LOGIN,actionLabel:v.Y1.CHANGE_PASSWORD,buttonProps:{clickHandler:function(){o(!0)}}},m={sectionLabel:v.Kh.LOGIN,groupLabel:v.V1.PASSWORD},d=(0,Ce.H)(c),p=(0,Qt.W)(i),g=(0,Qt.W)(l),b=Zt(u),E=Xt(s),y=je(m);return r.createElement($t,Object.assign({},b),r.createElement(k.XY.Input,Object.assign({},d)),a?r.createElement(we,Object.assign({},y),r.createElement(k.XY.Input,Object.assign({},p)),r.createElement(k.XY.Input,Object.assign({},g))):r.createElement(Jt,Object.assign({},E)))}function nn(e){var t=e.message;return r.createElement("div",{className:"settings-section-message"},t)}var rn=[v.V1.HOMEPAGE,v.V1.SPACE];function an(e){var t=e.keyboardShortcut,n=t.label,a=t.keys,o=e.selectedShortcutLabel,c=e.updateSelectedShortcut,i=n===o,l=Xt({sectionLabel:v.Kh.SHORTCUTS,actionLabel:n,buttonProps:{value:ce.transformShortcutKeys(a),clickHandler:function(){}},selectAction:{isSelected:i,toggleSelection:function(){c(i?null:n)}}});return r.createElement(Jt,Object.assign({},l))}function on(e){var t=e.groupLabel,n=e.keyboardShortcuts,a=e.selectedShortcutLabel,o=e.updateSelectedShortcut,c=je({sectionLabel:v.Kh.SHORTCUTS,groupLabel:t});return r.createElement(we,Object.assign({},c),ce.getSectionShortcuts(t,n).map((function(e,t){var n={keyboardShortcut:e,selectedShortcutLabel:a,updateSelectedShortcut:o};return r.createElement(an,Object.assign({key:t},n))})))}function cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ln(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function un(){var e=_(),t=(0,_e.K)(v.s1.SHORTCUTS),n=cn((0,r.useState)(null),2),a=n[0],o=n[1],c=cn((0,r.useState)(""),2),i=c[0],l=c[1],u={sectionLabel:v.Kh.SHORTCUTS,controlDataLabels:[v.s1.SHORTCUTS]},s={message:e.settings.shortcuts.message},f=Zt(u);function m(e){o(e)}return(0,r.useEffect)((function(){var e=new ce(l);return e.initEvents(),function(){e.removeEvents()}}),[]),(0,r.useEffect)((function(){var e;null!==a&&(e=t.find((function(e){return e.label===a})),t.forEach((function(t){t!==e&&t.section===e.section&&t.keys===i&&(t.keys=g.jP)})),e.keys=i,m(null),l(""))}),[i]),r.createElement($t,Object.assign({},f),r.createElement(nn,Object.assign({},s)),rn.map((function(e,n){var o={groupLabel:e,keyboardShortcuts:t,selectedShortcutLabel:a,updateSelectedShortcut:m};return r.createElement(on,Object.assign({key:n},o))})))}var sn=n(41389);function fn(e){var t,n,a,o=e.avatar,c=e.loadedFilename,i=e.userFullname,l=e.settingsAvatarLanguage,u=e.loadFile,m=e.removeImageButtonClickHandler,d=(0,r.useRef)(null),p=(0,r.useCallback)((function(e){u(e[0],(function(){}))}),[]),g=(0,sn.u)({onDrop:p}),b=g.getRootProps,y=g.getInputProps,h=g.isDragActive,S=s()("settings-avatar",(t={},a=h,(n=f._7.IS_DROP_ACTIVE)in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t)),A={size:v.bl,avatarUrl:o.value,userFullname:i},P={value:l.deleteImageButtonValue,clickHandler:function(){m(!1)}},O={value:l.deleteImageButtonValue,clickHandler:function(){m(!0)}};return r.createElement(r.Fragment,null,r.createElement("div",{className:S},r.createElement("div",{className:"settings-avatar-container"},r.createElement("div",{className:"settings-avatar-image","data-class":"flex-center"},r.createElement(E,Object.assign({},A))),o.value&&!c?r.createElement(k.XY.Button,Object.assign({},O)):""),r.createElement("div",Object.assign({className:"settings-avatar-drop","data-class":"flex-center"},b()),c?r.createElement("div",{className:"settings-avatar-loaded-file","data-class":"flex-center"},r.createElement("div",{className:"settings-avatar-filename"},c),r.createElement(k.XY.Button,Object.assign({},P))):r.createElement(r.Fragment,null,r.createElement("div",{className:"settings-avatar-drop-message"},l.dropText,r.createElement("span",{className:"settings-avatar-link"},l.dropLink))),o.error?r.createElement("div",{className:"settings-avatar-error"},l.errors[o.error]):""),r.createElement("input",Object.assign({type:"file",ref:d,onChange:function(){d&&d.current&&u(d.current.files[0],(function(){d.current.value=""}))}},y()))))}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dn(){var e,t,n=(0,_e.K)(v.s1.AVATAR),a=_().settings[v.Kh.USER].avatar,o=H(),c=o.userAvatar,i=o.userFullname,l=(e=(0,r.useState)(""),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],s=l[1],f=new Ne,m={avatar:n,userFullname:i,loadedFilename:u,settingsAvatarLanguage:a,loadFile:function(e,t){if(!function(e){return f.isValidUserAvatarFileType(e.name)}(e))return De.D.emit(le.f$.SET_ERROR,{error:O.xg.INVALID_FILE_TYPE,dataLabel:v.s1.AVATAR});var n=new FileReader;n.readAsDataURL(e),n.onloadend=function(){d(n.result),s(e.name),t()},n.onerror=function(){console.log(n.error)}},removeImageButtonClickHandler:function(e){d(e?"":c),s("")}};function d(e){De.D.emit(le.f$.UPDATE_VALUE,{dataLabel:v.s1.AVATAR,value:e})}return(0,r.useEffect)((function(){s("")}),[c]),r.createElement(fn,Object.assign({},m))}function pn(){var e={dataLabel:v.s1.FULLNAME},t={dataLabel:v.s1.USERNAME,descriptionLabel:f.vH.PREFIX},n={sectionLabel:v.Kh.USER,controlDataLabels:[v.s1.FULLNAME,v.s1.USERNAME,v.s1.AVATAR]},a={sectionLabel:v.Kh.USER,groupLabel:v.V1.AVATAR},o={sectionLabel:v.Kh.USER,groupLabel:v.V1.USER_DATA},c=(0,Ce.H)(e),i=(0,Ce.H)(t),l=Zt(n),u=je(a),s=je(o);return r.createElement($t,Object.assign({},l),r.createElement(we,Object.assign({},u),r.createElement(dn,null)),r.createElement(we,Object.assign({},s),r.createElement(k.XY.Input,Object.assign({},c)),r.createElement(k.XY.Input,Object.assign({},i))))}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gn(){var e,t,n=(e=(0,r.useState)(v.Kh.USER),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=n[0],o=n[1],c={sectionLabel:v.WZ.SETTINGS};return r.createElement(z,Object.assign({},c),_t.map((function(e,t){return a===e?function(e,t){switch(e){case v.Kh.USER:return r.createElement(pn,{key:t});case v.Kh.LOGIN:return r.createElement(tn,{key:t});case v.Kh.APP:return r.createElement(Yt,{key:t});case v.Kh.SHORTCUTS:return r.createElement(un,{key:t});case v.Kh.DANGER:return r.createElement(zt,{key:t})}}(e,t):function(e,t){var n={sectionLabel:e,setActiveSettingsSection:o};return r.createElement(Rt,Object.assign({key:t},n))}(e,t)})))}function bn(e){return function(){(new m.o).removeClass(f._7.IS_SPACE_PAGE_MENU_OPEN),e()}}function En(e){var t=e.space,n=e.closeMenuHandler,a=e.children,o=bn(n);if(null===t)return r.createElement("div",null);var c={logoType:f.mL.PAGE,color:t.color,logo:t.logo};return(0,r.useEffect)((function(){return function(){o()}}),[]),r.createElement("div",{className:"space-page"},r.createElement("div",{className:"space-page-header"},r.createElement("div",{className:"space-page-menu-button","data-class":"click flex-center",onClick:function(){var e=new m.o;e.toggleClass(f._7.IS_SPACE_PAGE_MENU_OPEN),e.hasClass(f._7.IS_SPACE_PAGE_MENU_OPEN)||n()}},r.createElement("span",null),r.createElement("span",null),r.createElement("span",null)),r.createElement(Ue,Object.assign({},c)),r.createElement("div",{className:"space-page-title"},t.name)),r.createElement("div",{className:"space-page-pages"},a[0]),r.createElement("div",{className:"space-page-editor"},a[1],r.createElement("div",{className:"space-page-tint",onClick:o})),a[2])}function yn(e){var t=e.children,n=(0,r.useRef)(null);return(0,r.useEffect)((function(){n&&n.current&&n.current.scrollIntoView()})),r.createElement("div",{className:"page",ref:n},t)}function hn(e){var t=e.children;return r.createElement("div",{className:"page-header"},t)}var Sn=n(8514),An=n(25478);function Pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function On(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wn(e){var t,n,a=e.initialValue,o=e.limitValueLength,c=e.placeholder,i=e.dataLabel,l=e.activePageID,u=e.newPageTitle,s=(t=(0,r.useState)(a),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return On(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?On(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=s[0],m=s[1];return(0,r.useEffect)((function(){m(a)}),[a]),{placeholder:c,value:f,onKeyDown:function(e){te()(e)===g.DV&&(e.preventDefault(),e.target.blur())},onChange:function(e){var t=e.target.value;t.length<=o&&m(t)},onBlur:function(e){var t=e.target.value;if(t!==a){i===v.s1.PAGE_TITLE&&t.length===v.mN&&(t=u);var n={id:l,updates:Pn({},i,t)};Pt.emit(le.uC.UPDATE_PAGE,n),m(t)}}}}function jn(e){var t=e.activePageID,n=e.pageTitle,a=e.placeholder,o=e.newPageTitle,c=wn({initialValue:n,limitValueLength:An.Sw,placeholder:a,dataLabel:v.s1.PAGE_TITLE,activePageID:t,newPageTitle:o}),i=Object.assign({className:"page-title"},c);return r.createElement(Sn.Z,Object.assign({},i))}function Tn(e){var t=e.activePageID,n=e.pageDescription,a=e.placeholder,o=wn({initialValue:n,limitValueLength:An.nc,placeholder:a,dataLabel:v.s1.PAGE_DESCRIPTION,activePageID:t}),c=Object.assign({className:"page-description",maxRows:3},o);return r.createElement(Sn.Z,Object.assign({},c))}function Cn(e){var t=e.children;return r.createElement("div",{className:"page-content"},t)}function kn(e){var t=e.children;return r.createElement("div",{className:"page-footer"},t)}var In=n(8475);function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rn(e){var t=e.color,n=e.type,a=e.label,o=e.title,c=e.clickHandler,i=Ln((0,r.useState)({}),2),l=i[0],u=i[1],f=Ln((0,r.useState)({}),2),m=f[0],p=f[1],v=s()("page-link",n),g={icon:In.Z,height:32,className:"page-link-icon"};return r.createElement("div",{className:v,"data-class":"click",style:l,onClick:function(e){e.stopPropagation(),c()},onMouseOver:function(){var e=Ne.createHexPageLinkHoverStyles(t);u(e),p(e)},onMouseLeave:function(){u({}),p({})}},r.createElement("div",{className:"page-link-content"},r.createElement("div",{className:"page-link-label"},a),r.createElement("div",{className:"page-link-title"},o)),r.createElement(d.JO,Object.assign({},g,{style:m})))}function _n(e){var t=e.color,n=e.pageLanguage,a=e.previousPageLink,o=e.nextPageLink;return r.createElement("div",{className:"page-navigation"},function(){if(!a)return g.v6;var e=Object.assign({color:t,type:f.jH.PREVIOUS,label:n.linkLabels.previous},a);return r.createElement(Rn,Object.assign({},e))}(),function(){if(!o)return g.v6;var e=Object.assign({color:t,type:f.jH.NEXT,label:n.linkLabels.next},o);return r.createElement(Rn,Object.assign({},e))}())}var Dn=n(37166),Un=n(78865),xn=n(9041);function Hn(e){var t=s()("page-node",e.blockProps.nodeType);return r.createElement("div",{className:t},r.createElement(xn.EditorBlock,Object.assign({},e)))}var Gn,Mn,Kn,Vn=(Gn={},Kn={margin:"0 1px",display:"inline-block",padding:"3px 6px",fontSize:"85%",maxWidth:"100%",fontFamily:'"Source Code Pro", Consolas, Menlo, monospace',borderRadius:"3px",backgroundColor:"var(--content-inline-code-background-color)"},(Mn=f.tP.CODE)in Gn?Object.defineProperty(Gn,Mn,{value:Kn,enumerable:!0,configurable:!0,writable:!0}):Gn[Mn]=Kn,Gn),Bn=n(51412),Fn=n(99585),Wn=n(23577),Zn=n(48068),$n=n(58170),Yn=n(38621),qn=n(93837),Jn=n(17018),Xn=n(6893),zn={Bold:tr(f.tP.BOLD,Fn.Z),Italic:tr(f.tP.ITALIC,Wn.Z),Underline:tr(f.tP.UNDERLINE,Zn.Z),Code:tr(f.tP.CODE,$n.Z)},Qn={Header1:nr(f.LM.HEADER_ONE,Yn.Z),Header2:nr(f.LM.HEADER_TWO,qn.Z),Header3:nr(f.LM.HEADER_THREE,Jn.Z),Blockquote:nr(f.LM.BLOCKQUOTE,Xn.Z)};function er(e){var t=e.inlineToolbarPlugin.InlineToolbar;return r.createElement(t,null,(function(e){return r.createElement(r.Fragment,null,r.createElement(Qn.Header1,Object.assign({},e)),r.createElement(Qn.Header2,Object.assign({},e)),r.createElement(Qn.Header3,Object.assign({},e)),r.createElement(Un.Z,{className:"inline-toolbar-separator"}),r.createElement(Qn.Blockquote,Object.assign({},e)),r.createElement(Un.Z,{className:"inline-toolbar-separator"}),r.createElement(zn.Bold,Object.assign({},e)),r.createElement(zn.Italic,Object.assign({},e)),r.createElement(zn.Underline,Object.assign({},e)),r.createElement(Un.Z,{className:"inline-toolbar-separator"}),r.createElement(zn.Code,Object.assign({},e)))}))}function tr(e,t){return(0,Bn.nt)({style:e,children:r.createElement(d.JO,{icon:t,height:24})})}function nr(e,t){return(0,Bn.kj)({blockType:e,children:r.createElement(d.JO,{icon:t,height:24})})}function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var or=(0,Un.C)({theme:{toolbarStyles:{toolbar:"inline-toolbar"},buttonStyles:{active:"is-active",button:"inline-toolbar-button"}}});function cr(e){var t,n,a=e.activePageID,o=e.pageContent,c=(e.color,t=(0,r.useState)(xn.EditorState.createEmpty()),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ar(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=c[0],l=c[1],u={editorState:i,customStyleMap:Vn,plugins:[or],handleKeyCommand:function(e,t){var n=xn.RichUtils.handleKeyCommand(t,e);return n?(l(n),"handled"):"not-handled"},blockRendererFn:function(e){var t=e.getType();switch(t){case f.LM.HEADER_ONE:case f.LM.HEADER_TWO:case f.LM.HEADER_THREE:case f.LM.BLOCKQUOTE:return m(t);default:return m(f.LM.PARAGRAPH)}},onChange:function(e){l(e)},onBlur:function(){var e=i.getCurrentContent(),t=(0,xn.convertToRaw)(e),n={id:a,updates:rr({},v.s1.PAGE_CONTENT,JSON.stringify(t))};Pt.emit(le.uC.UPDATE_PAGE,n)}},s={inlineToolbarPlugin:or};function m(e){return{component:Hn,editable:!0,props:{nodeType:e}}}return(0,r.useEffect)((function(){if(o){var e=(0,xn.convertFromRaw)(JSON.parse(o));l(xn.EditorState.createWithContent(e))}else l(xn.EditorState.createEmpty())}),[o]),r.createElement(r.Fragment,null,r.createElement(Dn.ZP,Object.assign({},u)),r.createElement(er,Object.assign({},s)))}function ir(e){var t=e.activeSpace,n=e.activePage,a=e.pageLanguage,o=e.pageTitles,c=e.setActivePage,i=t.pages,l={pageTitle:n.title,placeholder:a.titlePlaceholder,activePageID:n.id,newPageTitle:a.newPageTitle},u={pageDescription:n.description,placeholder:a.descriptionPlaceholder,activePageID:n.id},s={activePageID:n.id,pageContent:n.content,color:t.color};function f(e){return{title:o[e],clickHandler:function(){c(i[e])}}}return r.createElement(yn,null,r.createElement(hn,null,r.createElement(jn,Object.assign({},l)),r.createElement(Tn,Object.assign({},u))),r.createElement(Cn,null,r.createElement(cr,Object.assign({},s))),r.createElement(kn,null,function(){if(1===i.length)return g.v6;var e,o,c,l=Object.assign({color:t.color,pageLanguage:a},(e=i.findIndex((function(e){return e===n.id})),o=e-1,c=e+1,0===e?{previousPageLink:void 0,nextPageLink:f(c)}:e===i.length-1?{previousPageLink:f(o),nextPageLink:void 0}:{previousPageLink:f(o),nextPageLink:f(c)}));return r.createElement(_n,Object.assign({},l))}()))}function lr(e){var t=e.isLastPage,n=e.color,a=e.pageTitle,o=e.pageID,c=e.activePage,i=e.setActivePage,l=e.deletePage,u=o===c.id,m=s()("page-list-item",function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},f._7.IS_ACTIVE,u));function p(e){e.stopPropagation(),l(o)}return r.createElement("div",{className:m,"data-class":"click",style:u?Ne.createHexColorStyle(n):{},onClick:function(e){e.stopPropagation(),u||i(o)}},o===v.uP?r.createElement("div",{className:"lds-ellipsis"},new Array(4).fill(0).map((function(e,t){return r.createElement("div",{style:Ne.createHexBackgroundColorStyle(n),key:t})}))):r.createElement(r.Fragment,null,r.createElement("div",{className:"page-list-title"},u?c.title:a),function(){if(t)return g.v6;var e={icon:ze.Z,height:f.TN};return r.createElement("div",{className:"page-list-icon","data-class":"click flex-center",onClick:p},r.createElement(d.JO,Object.assign({},e)))}()))}var ur=n(3476);function sr(e){var t=e.addPageValue,n=e.color,a=e.pageTitles,o=e.pageIDs,c=e.activePage,i=e.setActivePage,l=e.addPage,u=e.deletePage;if(void 0===c)return r.createElement(ur.R,null);var s={icon:J.Z,height:f.TN};return r.createElement("div",{className:"page-list"},r.createElement("div",{className:"page-list-container"},o.map((function(e,t){var l={isLastPage:1===o.length,color:n,pageID:e,pageTitle:a[t],activePage:c,setActivePage:i,deletePage:u};return r.createElement(lr,Object.assign({key:e},l))}))),r.createElement("div",{className:"page-list-item page-add","data-class":"click",onClick:function(){l()}},t,r.createElement("div",{className:"page-list-icon","data-class":"flex-center"},r.createElement(d.JO,Object.assign({},s)))))}function fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mr(e){var t,n,c=e.isSpacePageOpen,i=e.closeMenuHandler,l=(0,a.k6)(),u=_().page,s=(t=(0,r.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return fr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fr(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=s[0],d=s[1],p=Tt(),b=Ye(),E=bn(i),y=U.B.get(v.cR.USER_STORE),h=(0,o.v9)(y.getActiveSpace()),S=U.B.get(v.cR.ACTIVE_SPACE_STORE),A=(0,o.v9)(S.getActivePage()),O=(0,o.v9)(S.getPageTitles());(0,r.useEffect)((function(){if(!c){var e=(new st.C).getStore(v.cR.SPACES_STORE),t=(new Me.G).getOpenSpacePathnames(),n=t.spacePathname,r=t.pagePathname,a=e.getSpaceByPathname(n);a?b(a,(function(){var e={spacePathname:n,pagePathname:r};Pt.emit(le.uC.OPEN_SPACE,e)})):p()}}),[]),(0,r.useEffect)((function(){var e={popupName:f.rW.DELETE_PAGE,controller:Pt,controllerEvent:le.uC.DELETE_PAGE};d(e)}),[]),(0,r.useEffect)((function(){A&&I(A.id)}),[A&&A.title]);var w={space:h,closeMenuHandler:i},j={addPageValue:u.addPage,color:h.color,pageTitles:O,pageIDs:h.pages,activePage:A,setActivePage:k,addPage:function(){Pt.emit(le.uC.ADD_PAGE,C)},deletePage:function(e){var t={pageID:e,activePage:A,changePagePathname:I};d(Object.assign(Object.assign({},m),{controllerPayload:t})),(new P).openPopup(f.rW.DELETE_PAGE)}},T={activeSpace:h,activePage:A,pageLanguage:u,pageTitles:O,setActivePage:k},C={newPageTitle:u.newPageTitle,callback:I};function k(e){var t={pageID:e,callback:function(){I(e)}};Pt.emit(le.uC.SET_ACTIVE_PAGE,t),E()}function I(e){var t=new st.C,n=new D.f,r=t.getStore(v.cR.ACTIVE_SPACE_STORE).getPages(),a=g.v6;r[0].id!==e&&(a=r.find((function(t){return t.id===e})).pathname);var o=n.getActivePageRoutePath(h.pathname,a);l.push(o)}return r.createElement(En,Object.assign({},w),r.createElement(sr,Object.assign({},j)),A?r.createElement(a.rs,null,r.createElement(a.AW,{path:v.DF.SPACE_PAGE,exact:!0},r.createElement(ir,Object.assign({},T))),r.createElement(a.AW,{path:v.DF.ACTIVE_PAGE},r.createElement(ir,Object.assign({},T)))):r.createElement(ur.R,null),null===m?r.createElement("div",null):r.createElement(It,Object.assign({},m)))}function dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pr(e){var t=e.activeSpaceSidebarActionIcon,n=e.setActiveSpaceSidebarActionIcon,a=_(),o=Tt(),c=H(),i={avatarUrl:c.userAvatar,userFullname:c.userFullname,clickHandler:function(){o()}},l={icons:[f.jl.SETTINGS],iconPayloads:dr({},f.jl.SETTINGS,{description:a.actionIconDescriptions[f.jl.SETTINGS],clickHandler:function(){var e;e=f.jl.SETTINGS,n(e===t?"":e)}}),activeActionIconLabel:t},u=(0,F.Z)(l);return r.createElement(r.Fragment,null,r.createElement(E,Object.assign({},i)),u.map((function(e,t){return r.createElement(V.m,Object.assign({key:t},e))})))}var vr=n(55899);function gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function br(e){var t,n=e.activeSpaceSidebarActionIcon,a=e.setActiveSpaceSidebarActionIcon,o=e.children,c=s()("space-sidebar-frame",(gr(t={},f._7.SHOW_SPACE_SIDEBAR_FRAME,!!n),gr(t,f._7.HIDE_SPACE_SIDEBAR_FRAME,n===g.v6),t)),i={icon:vr.Z,height:f.TN};return r.createElement("div",{className:c},r.createElement("div",{className:"space-sidebar-frame-header"},r.createElement("div",{className:"space-sidebar-frame-close-icon","data-class":"click flex-center",onClick:function(){a(g.v6)}},r.createElement(d.JO,Object.assign({},i)))),r.createElement("div",{className:"space-sidebar-frame-container"},r.createElement("div",{className:"space-sidebar-frame-content"},o||g.v6)))}function Er(){var e={title:_().settings[v.Kh.DELETE_SPACE].title},t=Xt({sectionLabel:v.Kh.DELETE_SPACE,actionLabel:v.Y1.DELETE_SPACE,buttonProps:{type:f.qh.DANGER,clickHandler:function(){(new P).openPopup(f.rW.DELETE_SPACE)}}}),n={popupName:f.rW.DELETE_SPACE,controller:pe,controllerEvent:le.do.DELETE_SPACE};return r.createElement($t,Object.assign({},e),r.createElement(Jt,Object.assign({},t)),r.createElement(It,Object.assign({},n)))}function yr(){var e=Zt({sectionLabel:v.Kh.SPACE,controlDataLabels:[v.s1.SPACE_NAME,v.s1.SPACE_COLOR,v.s1.SPACE_LOGO],saveUpdatedData:function(e,t){var n={updatedData:e,callback:t};pe.emit(le.do.UPDATE_SPACE,n)}});return r.createElement(r.Fragment,null,r.createElement($t,Object.assign({},e),r.createElement($e,null)),r.createElement(Er,null))}function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sr(){var e;e=x(v.s1.THEME),(0,r.useEffect)((function(){var t=new m.o;return t.addClass(e),Y.loadTheme(e),function(){t.removeClass(e)}}),[e]);var t,n,c=(t=(0,r.useState)(g.v6),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return hr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hr(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=c[0],l=c[1],u=U.B.get(v.cR.ACTIVE_SPACE_STORE),s=(0,o.v9)(u.getIsOpen()),d={isSpacePageOpen:s},p={isSpacePageOpen:s,closeMenuHandler:function(){l(g.v6)}};return(0,r.useEffect)((function(){l(g.v6)}),[s]),r.createElement(K,Object.assign({},d),r.createElement(Z,null,function(){if(!s)return g.v6;var e={activeSpaceSidebarActionIcon:i,setActiveSpaceSidebarActionIcon:l};return r.createElement(pr,Object.assign({},e))}()),s?g.v6:r.createElement(M,null),function(){if(!s)return g.v6;var e={activeSpaceSidebarActionIcon:i,setActiveSpaceSidebarActionIcon:l};return r.createElement(br,Object.assign({},e),function(){switch(i){case f.jl.SETTINGS:return r.createElement(yr,null);default:return r.createElement("div",null)}}())}(),r.createElement(a.rs,null,r.createElement(a.AW,{path:v.DF.ROOT,exact:!0,component:Lt}),r.createElement(a.AW,{path:v.DF.SPACES,component:Lt}),r.createElement(a.AW,{path:v.DF.SETTINGS,component:gn}),r.createElement(a.AW,{path:v.DF.SPACE_PAGE},r.createElement(mr,Object.assign({},p)))))}}}]);