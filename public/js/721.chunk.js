(self.webpackChunkgitbook_clone=self.webpackChunkgitbook_clone||[]).push([[721],{56330:(t,e,n)=>{"use strict";n.d(e,{c:()=>c});var r=n(67294),o=n(94184),a=n.n(o),i=n(59348),u=n(89629);function c(t){var e,n,o,c=t.title,s=t.linkText,f=t.authError,l=t.inputsProps,p=t.buttonProps,h=t.linkClickHanlder,v=a()("auth-form",(e={},o=!!f,(n=i._7.IS_ERROR)in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e));return r.createElement("div",{className:v},r.createElement("div",{className:"auth-form-title"},c),r.createElement("div",{className:"auth-form-error"},f),r.createElement("div",{className:"auth-form-inputs"},l.map((function(t,e){return r.createElement(u.XY.Input,Object.assign({key:e},t))}))),r.createElement(u.XY.Button,Object.assign({},p)),r.createElement("div",{className:"auth-form-link",onClick:h},s))}},36863:(t,e,n)=>{"use strict";n.d(e,{P:()=>v});var r=n(67294),o=n(93042),a=n(87248),i=n(18534),u=n(82023),c=n(59348),s=n(82780),f=n(78100),l=n(12907);function p(t){var e,n,p,h=t.children,v=(0,f.U)(o.wd.AUTH),y={icon:i.Z,height:32,className:"auth-logo"},m={icons:[c.jl.INFO],iconPayloads:(e={},n=c.jl.INFO,p={description:v.actionIconDescription[c.jl.INFO],dropdownComponent:l.R},n in e?Object.defineProperty(e,n,{value:p,enumerable:!0,configurable:!0,writable:!0}):e[n]=p,e)},d=(0,u.Z)(m);return r.createElement("div",{className:"auth"},r.createElement("div",{className:"auth-content"},r.createElement("div",{className:"auth-header"},r.createElement(a.JO,Object.assign({},y)),"GitBook Clone"),r.createElement("div",{className:"auth-form-container","data-class":"shadow"},h)),r.createElement("div",{className:"auth-icons"},d.map((function(t,e){return r.createElement(s.m,Object.assign({key:e},t))}))))}var h=n(22530);function v(t){var e=t.children;return(0,r.useEffect)((function(){(new h.o).addClass(o.b3.ORIGINAL)}),[]),r.createElement(p,null,e)}},81603:(t,e,n)=>{"use strict";n.d(e,{i:()=>Q});var r=n(67294),o=n(5977),a=n(84751),i=n(93042),u=n(73021),c=n(78100),s=n(11718),f=n(96652),l=n(22669),p=n(61586),h=[u.s1.EMAIL,u.s1.PASSWORD],v=[u.s1.FULLNAME].concat(h),y=n(42705),m=n.n(y),d=n(25478);function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var g=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,u)}c((r=r.apply(t,e||[])).next())}))},R=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.validation=new d.iA}var e,n;return e=t,(n=[{key:"validateRegistrationData",value:function(t){return g(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=m().object(Object.assign(b({},u.s1.FULLNAME,this.validation.fullname().empty()),this.getCommonValidationSchema())),e.next=4,n.validateAsync(t);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(0),(0,d.s9)(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"validateLoginData",value:function(t){return g(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=m().object(Object.assign({},this.getCommonValidationSchema())),e.next=4,n.validateAsync(t);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(0),(0,d.s9)(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"getCommonValidationSchema",value:function(){var t;return b(t={},u.s1.EMAIL,this.validation.email().empty()),b(t,u.s1.PASSWORD,this.validation.password().empty()),t}}])&&w(e.prototype,n),t}(),O=n(5192),E=n(68375),S=n(29667),k=n(22222);function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function j(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,u)}c((r=r.apply(t,e||[])).next())}))},T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(c,t);var e,n,r,o,a=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(r);if(o){var n=x(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return j(this,t)});function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).storeManager=new O.C,t.authStore=t.storeManager.getStore(u.cR.AUTH_STORE),t.userDraftModel=new E.Q,t.removeError(),t}return e=c,(n=[{key:"runAuthMode",value:function(t){var e=t.inputDataLabels,n=t.urlPathname,r=t.validateFunction;return _(this,void 0,void 0,regeneratorRuntime.mark((function t(){var o,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=this.getInputValues(e),t.next=4,r(o);case 4:return a=t.sent,t.next=7,this.sendRequest(n,a);case 7:i=t.sent,this.saveUserToLocalStorage(i),this.reloadApp(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),this.parseError(t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,12]])})))}},{key:"removeError",value:function(){this.authStore.setAuthError("")}},{key:"getInputValues",value:function(t){var e=this,n={};return t.forEach((function(t){var r=e.userDraftModel.getDraftState(t);n[t]=r.value})),n}},{key:"sendRequest",value:function(t,e){return _(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.createRequest(t,e),n.next=3,this.requestSender.send(r).create();case 3:return o=n.sent,n.abrupt("return",o.parseResponse());case 5:case"end":return n.stop()}}),n,this)})))}},{key:"saveUserToLocalStorage",value:function(t){(new S.B).saveUser(t)}},{key:"reloadApp",value:function(){location.replace(location.origin)}},{key:"parseError",value:function(t){var e;switch(t.name){case i.zw.VALIDATION_ERROR:e=t.payload;break;case i.zw.CLIENT_ERROR:e=t.getPayload();break;default:return void console.log(t)}e.isLoginError?this.authStore.setAuthError(e.error):this.userDraftModel.setError(e.errorLabel,e.dataLabel)}},{key:"createRequest",value:function(t,e){return this.requestCreator.appendUrlPathname(t).setBody(e).createRequest()}}])&&P(e.prototype,n),c}(k.g);function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(u,t);var e,n,r,o,a=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=U(r);if(o){var n=U(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return M(this,t)});function u(){return L(this,u),a.apply(this,arguments)}return e=u,(n=[{key:"createUser",value:function(){return t=this,e=void 0,n=void 0,r=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new R,t.next=3,this.runAuthMode({inputDataLabels:v,urlPathname:i.Y3.REGISTRATION,validateFunction:e.validateRegistrationData.bind(e)});case 3:case"end":return t.stop()}}),t,this)})),new(n||(n=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,u)}c((r=r.apply(t,e||[])).next())}));var t,e,n,r}}])&&D(e.prototype,n),u}(T);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function q(t,e){return(q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}(u,t);var e,n,r,o,a=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=z(r);if(o){var n=z(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return B(this,t)});function u(){return V(this,u),a.apply(this,arguments)}return e=u,(n=[{key:"loginUser",value:function(){return t=this,e=void 0,n=void 0,r=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new R,t.next=3,this.runAuthMode({inputDataLabels:h,urlPathname:i.Y3.LOGIN,validateFunction:e.validateLoginData.bind(e)});case 3:case"end":return t.stop()}}),t,this)})),new(n||(n=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,u)}c((r=r.apply(t,e||[])).next())}));var t,e,n,r}}])&&H(e.prototype,n),u}(T),Y=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function u(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,u)}c((r=r.apply(t,e||[])).next())}))},X=new p.v;X.on(l.lu.REMOVE_ERROR,(function(){return Y(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(new T).removeError();case 2:case"end":return t.stop()}}),t)})))})).on(l.lu.INIT_REGISTRATION,(function(t){return Y(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new G,e.next=3,n.createUser();case 3:t();case 4:case"end":return e.stop()}}),e)})))})).on(l.lu.INIT_LOGIN,(function(t){return Y(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new W,e.next=3,n.loginUser();case 3:t();case 4:case"end":return e.stop()}}),e)})))}));var Z=n(37290),$=n(83709);function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Q(t){var e,n,p=t.mode,h=t.nextRoutePathname,v=(0,o.k6)(),y=(e=(0,r.useState)(!1),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}}(e,n)||function(t,e){if(t){if("string"==typeof t)return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=y[0],d=y[1],b=(0,c.U)(i.wd.AUTH),w=Z.B.get(u.cR.AUTH_STORE),g=(0,a.v9)(w.getAuthError()),R={dataLabel:u.s1.EMAIL},O=(0,s.H)(R),E=(0,$.W)({});function S(){d(!1)}return{title:b[p].title,linkText:b[p].linkText,authError:b.errors[g],inputsProps:[O,E],buttonProps:{isLoading:m,value:b[p].buttonValue,clickHandler:function(){d(!0),p===u.Az.REGISTRATION?X.emit(l.lu.INIT_REGISTRATION,S):X.emit(l.lu.INIT_LOGIN,S)}},linkClickHanlder:function(){var t=[u.s1.EMAIL,u.s1.PASSWORD];p===u.Az.REGISTRATION&&t.push(u.s1.FULLNAME),f.D.emit(l.f$.RESET_STATES,t),X.emit(l.lu.REMOVE_ERROR),v.push(h)}}}}}]);